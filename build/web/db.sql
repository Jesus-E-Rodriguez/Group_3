/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
/**
 * Author:  Jesus
 * Created: Feb 19, 2018
 */

/* Drop statements */
DROP TABLE ORDERS;
DROP TABLE SEATS;
DROP TABLE CLIENTS;

/* Create table statements*/
CREATE TABLE SEATS (
    S_CAT VARCHAR(10) NOT NULL PRIMARY KEY,
    S_PRICE DOUBLE NOT NULL,
    S_SOLD NUMERIC(2) CHECK (S_SOLD BETWEEN 1 AND 75),
    S_TOTAL DOUBLE
);

CREATE TABLE CLIENTS (
    C_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    C_FNAME VARCHAR(40) NOT NULL,
    C_LNAME VARCHAR(40) NOT NULL,
    C_EMAIL VARCHAR(50) NOT NULL,
    C_ADDRESS VARCHAR(50) NOT NULL,
    C_ZIP VARCHAR(5) NOT NULL,
    C_CITY VARCHAR(50) NOT NULL,
    C_STATE VARCHAR(2) NOT NULL
);

CREATE TABLE ORDERS (
    O_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    O_QUANTITY NUMERIC(2) CHECK (O_QUANTITY BETWEEN 1 AND 75),
    O_SHIPPING BOOLEAN,    
    O_FEE DOUBLE NOT NULL,
    O_TOTAL DOUBLE NOT NULL,
    O_CATNAME VARCHAR(10),
    C_ID INTEGER,
    FOREIGN KEY (C_ID) REFERENCES CLIENTS(C_ID) 
);


/* SEATS TABLE INFO */
INSERT INTO SEATS(S_CAT, S_PRICE, S_SOLD, S_TOTAL)
    VALUES('Category 1', 0, null, null);

INSERT INTO SEATS(S_CAT, S_PRICE, S_SOLD, S_TOTAL)
    VALUES('Category 2', 0, null, null);

INSERT INTO SEATS(S_CAT, S_PRICE, S_SOLD, S_TOTAL)
    VALUES('Category 3', 0, null, null);




/* Random client info */
INSERT INTO CLIENTS( C_FNAME, C_LNAME, C_EMAIL, C_ADDRESS, C_ZIP, C_CITY, C_STATE)
    VALUES ('John', 'Doe', 'example@example.com', '902 Main St', '90210', 'Beverly Hills', 'CA');

INSERT INTO ORDERS(O_QUANTITY, O_SHIPPING, O_FEE, O_TOTAL, O_CATNAME, C_ID)
    VALUES (1, false, 3.50, 53.50, 'Category 1', (SELECT MAX(C_ID) FROM CLIENTS));

UPDATE SEATS
    SET S_SOLD = 1, S_PRICE = 53.50, S_TOTAL = 53.50
    WHERE S_CAT = 'Category 1';

INSERT INTO CLIENTS( C_FNAME, C_LNAME, C_EMAIL, C_ADDRESS, C_ZIP, C_CITY, C_STATE)
    VALUES ('Lisa', 'Doe', 'example@example.com', '902 Main St', '90210', 'Beverly Hills', 'CA');

INSERT INTO ORDERS(O_QUANTITY, O_SHIPPING, O_FEE, O_TOTAL, O_CATNAME, C_ID)
    VALUES (1, false, 2.80, 42.80, 'Category 2', (SELECT MAX(C_ID) FROM CLIENTS));

UPDATE SEATS
    SET S_SOLD = 1, S_PRICE = 42.80, S_TOTAL = 42.80
    WHERE S_CAT = 'Category 2';

INSERT INTO CLIENTS( C_FNAME, C_LNAME, C_EMAIL, C_ADDRESS, C_ZIP, C_CITY, C_STATE)
    VALUES ('Sam', 'Doe', 'example@example.com', '902 Main St', '90210', 'Beverly Hills', 'CA');

INSERT INTO ORDERS(O_QUANTITY, O_SHIPPING, O_FEE, O_TOTAL, O_CATNAME, C_ID)
    VALUES (1, false, 2.10, 32.10, 'Category 3', (SELECT MAX(C_ID) FROM CLIENTS));

UPDATE SEATS
    SET S_SOLD = 1, S_PRICE = 32.10, S_TOTAL = 32.10
    WHERE S_CAT = 'Category 3';

/*
INSERT INTO (CAT_ID, CAT_PRICE, CAT_SOLD, CAT_TOTAL)
    VALUES ('Category 1', 50, 1, 50);

INSERT INTO CLIENTS(C_FNAME, C_LNAME, C_EMAIL, C_ADDRESS, C_ZIP, C_CITY, C_STATE)
    VALUES ('Lisa', 'Doe', 'example@example.com', '902 Main St', '90210', 'Beverly Hills', 'CA');

INSERT INTO ORDERS(O_SHIPPING, C_ID)
    VALUES (false, (SELECT MAX(C_ID) FROM CLIENTS));

INSERT INTO CATEGORY(CAT_ID, CAT_PRICE, CAT_SOLD, CAT_TOTAL)
    VALUES ('Category 2', 40, 1, 40);

INSERT INTO CLIENTS(C_FNAME, C_LNAME, C_EMAIL, C_ADDRESS, C_ZIP, C_CITY, C_STATE)
    VALUES ('Kenny', 'Doe', 'example@example.com', '902 Main St', '90210', 'Beverly Hills', 'CA');

INSERT INTO ORDERS(O_SHIPPING, C_ID)
    VALUES (true, (SELECT MAX(C_ID) FROM CLIENTS));

INSERT INTO CATEGORY(CAT_ID, CAT_PRICE, CAT_SOLD, CAT_TOTAL)
    VALUES ('Category 3', 30, 1, 30);

*/


/*CREATE TABLE CATEGORY (
    CAT_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    CAT_PRICE DOUBLE NOT NULL,
    CAT_SOLD NUMERIC(2) NOT NULL,
    CAT_TOTAL DOUBLE NOT NULL
);

CREATE TABLE CLIENTS (
    C_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    C_FNAME VARCHAR(40) NOT NULL,
    C_LNAME VARCHAR(40) NOT NULL,
    C_EMAIL VARCHAR(50) NOT NULL,
    C_ADDRESS VARCHAR(50) NOT NULL,
    C_ZIP VARCHAR(5) NOT NULL,
    C_CITY VARCHAR(50) NOT NULL,
    C_STATE VARCHAR(2) NOT NULL
);

CREATE TABLE ORDERS (
    O_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    O_SHIPPING BOOLEAN,
    C_ID INTEGER,
    FOREIGN KEY (C_ID) REFERENCES CLIENTS(C_ID) 
);

CREATE TABLE ORDERS (
    O_ID INTEGER GENERATED ALWAYS AS IDENTITY NOT NULL PRIMARY KEY,
    O_CAT1 NUMERIC(2) CHECK (O_CAT1 BETWEEN 1 AND 75),
    O_CAT2 NUMERIC(2) CHECK (O_CAT2 BETWEEN 1 AND 75),
    O_CAT3 NUMERIC(2) CHECK (O_CAT3 BETWEEN 1 AND 75),
    O_SHIPPING BOOLEAN,
    C_ID INTEGER,
    FOREIGN KEY (C_ID) REFERENCES CLIENTS(C_ID) 
);*/
